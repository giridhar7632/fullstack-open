{"version":3,"sources":["components/Message.js","controllers/persons.js","components/PersonForm.js","components/Persons.js","App.js","index.js"],"names":["Message","notify","msg","className","url","getPersons","a","axios","get","res","data","addPerson","person","post","deletePerson","id","delete","updatePerson","newPerson","put","PersonForm","setPersons","persons","setMsg","useState","newName","setNewName","newNum","setNewNum","value","onChange","e","target","placeholder","type","onClick","preventDefault","personObj","name","number","exist","find","undefined","window","confirm","then","map","setTimeout","concat","catch","error","message","response","Persons","filterPersons","handleDelete","i","App","filter","setFilter","setFilterPersons","useEffect","toLowerCase","indexOf","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"iKAUeA,EARC,SAAC,GAAgB,IAAdC,EAAa,EAAbA,OACjB,GAAe,OAAXA,EACF,OAAO,KAET,IAAQC,EAAmBD,EAAnBC,IAAKC,EAAcF,EAAdE,UACb,OAAO,qBAAKA,UAAWA,EAAhB,SAA4BD,K,uCCL/BE,EAAM,eAECC,EAAU,uCAAG,4BAAAC,EAAA,sEACNC,IAAMC,IAAIJ,GADJ,cAClBK,EADkB,yBAEjBA,EAAIC,MAFa,2CAAH,qDAKVC,EAAS,uCAAG,WAAOC,GAAP,eAAAN,EAAA,sEACLC,IAAMM,KAAKT,EAAKQ,GADX,cACjBH,EADiB,yBAEhBA,EAAIC,MAFY,2CAAH,sDAKTI,EAAY,uCAAG,WAAOC,GAAP,eAAAT,EAAA,sEACRC,IAAMS,OAAN,UAAgBZ,EAAhB,YAAuBW,IADf,cACpBN,EADoB,yBAEnBA,EAAIC,MAFe,2CAAH,sDAKZO,EAAY,uCAAG,WAAOC,EAAWH,GAAlB,eAAAT,EAAA,sEACRC,IAAMY,IAAN,UAAaf,EAAb,YAAoBW,GAAMG,GADlB,cACpBT,EADoB,yBAEnBA,EAAIC,MAFe,2CAAH,wDCkEVU,EAlFI,SAAC,GAAqC,IAAnCC,EAAkC,EAAlCA,WAAYC,EAAsB,EAAtBA,QAASC,EAAa,EAAbA,OACzC,EAA8BC,mBAAS,IAAvC,mBAAOC,EAAP,KAAgBC,EAAhB,KACA,EAA4BF,mBAAS,IAArC,mBAAOG,EAAP,KAAeC,EAAf,KAmDA,OACE,8BACE,iCACE,wCACQ,IACN,uBACEC,MAAOJ,EACPK,SAxDe,SAACC,GACxBL,EAAWK,EAAEC,OAAOH,QAwDZI,YAAY,oBAGhB,0CACU,IACR,uBACEJ,MAAOF,EACPG,SA7Dc,SAACC,GACvBH,EAAUG,EAAEC,OAAOH,QA6DXI,YAAY,oBAGhB,8BACE,wBAAQC,KAAK,SAASC,QA9DT,SAACJ,GACpBA,EAAEK,iBACF,IAAMC,EAAY,CAChBC,KAAMb,EACNc,OAAQZ,GAEJa,EAAQlB,EAAQmB,MAAK,SAAC7B,GAAD,OAAYA,EAAO0B,OAASb,UACzCiB,IAAVF,EAEAG,OAAOC,QAAP,UACKnB,EADL,uFAIAR,EAAaoB,EAAWG,EAAMzB,IAAI8B,MAAK,SAACnC,GACtCW,EACEC,EAAQwB,KAAI,SAAClC,GAAD,OAAaF,EAAKK,KAAOH,EAAOG,GAAKL,EAAOE,MAE1DW,EAAO,CAAErB,IAAI,WAAD,OAAaQ,EAAK4B,MAAQnC,UAAW,YACjD4C,YAAW,WACTxB,EAAO,QACN,QAIPZ,EAAU0B,GACPQ,MAAK,SAACnC,GACLW,EAAWC,EAAQ0B,OAAOtC,IAC1Ba,EAAO,CAAErB,IAAI,SAAD,OAAWQ,EAAK4B,MAAQnC,UAAW,YAC/C4C,YAAW,WACTxB,EAAO,QACN,QAEJ0B,OAAM,SAACC,GACN3B,EAAO,CAAE4B,QAASD,EAAME,SAAS1C,KAAKwC,MAAO/C,UAAW,UACxD4C,YAAW,WACTxB,EAAO,QACN,QAGTG,EAAW,IACXE,EAAU,KAsBJ,yBC/DKyB,EAXC,SAAC,GAAqC,IAAnCC,EAAkC,EAAlCA,cAAeC,EAAmB,EAAnBA,aAChC,OAAOD,EAAcR,KAAI,SAAClC,EAAQ4C,GAAT,OACvB,gCACG5C,EAAO0B,KADV,MACmB1B,EAAO2B,OAAQ,IAChC,wBAAQJ,QAAS,kBAAMoB,EAAa3C,EAAOG,GAAIH,EAAO0B,OAAtD,sBAFQkB,OCyDCC,EAvDH,WACV,MAA8BjC,mBAAS,IAAvC,mBAAOF,EAAP,KAAgBD,EAAhB,KACA,EAAsBG,mBAAS,MAA/B,mBAAOtB,EAAP,KAAYqB,EAAZ,KACA,EAA4BC,mBAAS,IAArC,mBAAOkC,EAAP,KAAeC,EAAf,KACA,EAA0CnC,mBAASF,GAAnD,mBAAOgC,EAAP,KAAsBM,EAAtB,KAYML,EAAe,SAACxC,EAAIuB,GACpBK,OAAOC,QAAP,iBAAyBN,KAC3BxB,EAAaC,GACV8B,MAAK,WACJxC,IAAawC,MAAK,SAACnC,GAAD,OAAUW,EAAWX,SAExCuC,OAAM,SAACC,GACN3B,EAAO,CAAErB,IAAI,GAAD,OAAKoC,EAAL,mBAA4BnC,UAAW,UACnD4C,YAAW,WACTxB,EAAO,QACN,SASX,OAJAsC,qBAAU,WACRxD,IAAawC,MAAK,SAACnC,GAAD,OAAUW,EAAWX,QACtC,IAGD,gCACE,4CACA,oDACoB,IAClB,uBAAOoB,SAlCc,SAACC,GAC1B4B,EAAU5B,EAAEC,OAAOH,OACnB+B,EACEtC,EAAQoC,QACN,SAAC9C,GAAD,OACuE,IAArEA,EAAO0B,KAAKwB,cAAcC,QAAQhC,EAAEC,OAAOH,MAAMiC,oBA6BdjC,MAAO6B,OAE9C,cAAC,EAAD,CAASzD,OAAQC,IACjB,2CACA,cAAC,EAAD,CAAYoB,QAASA,EAASD,WAAYA,EAAYE,OAAQA,IAC9D,yCACY,KAAXmC,EACC,cAAC,EAAD,CAASH,aAAcA,EAAcD,cAAehC,IAEpD,cAAC,EAAD,CAASiC,aAAcA,EAAcD,cAAeA,QCnD5DU,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEFC,SAASC,eAAe,W","file":"static/js/main.b5c7f74e.chunk.js","sourcesContent":["import React from 'react'\r\n\r\nconst Message = ({ notify }) => {\r\n  if (notify === null) {\r\n    return null\r\n  }\r\n  const { msg, className } = notify\r\n  return <div className={className}>{msg}</div>\r\n}\r\n\r\nexport default Message\r\n","import axios from 'axios'\r\n\r\nconst url = '/api/persons'\r\n\r\nexport const getPersons = async () => {\r\n  const res = await axios.get(url)\r\n  return res.data\r\n}\r\n\r\nexport const addPerson = async (person) => {\r\n  const res = await axios.post(url, person)\r\n  return res.data\r\n}\r\n\r\nexport const deletePerson = async (id) => {\r\n  const res = await axios.delete(`${url}/${id}`)\r\n  return res.data\r\n}\r\n\r\nexport const updatePerson = async (newPerson, id) => {\r\n  const res = await axios.put(`${url}/${id}`, newPerson)\r\n  return res.data\r\n}\r\n","import React, { useState } from 'react'\r\nimport { addPerson, updatePerson } from '../controllers/persons'\r\n\r\nconst PersonForm = ({ setPersons, persons, setMsg }) => {\r\n  const [newName, setNewName] = useState('')\r\n  const [newNum, setNewNum] = useState('')\r\n\r\n  const handleNameChange = (e) => {\r\n    setNewName(e.target.value)\r\n  }\r\n  const handleNumChange = (e) => {\r\n    setNewNum(e.target.value)\r\n  }\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault()\r\n    const personObj = {\r\n      name: newName,\r\n      number: newNum,\r\n    }\r\n    const exist = persons.find((person) => person.name === newName)\r\n    if (exist !== undefined) {\r\n      if (\r\n        window.confirm(\r\n          `${newName} is already in your phonebook, do you want replace the old number with a new one?`\r\n        )\r\n      ) {\r\n        updatePerson(personObj, exist.id).then((data) => {\r\n          setPersons(\r\n            persons.map((person) => (data.id === person.id ? data : person))\r\n          )\r\n          setMsg({ msg: `Updated ${data.name}`, className: 'success' })\r\n          setTimeout(() => {\r\n            setMsg(null)\r\n          }, 3000)\r\n        })\r\n      }\r\n    } else {\r\n      addPerson(personObj)\r\n        .then((data) => {\r\n          setPersons(persons.concat(data))\r\n          setMsg({ msg: `Added ${data.name}`, className: 'success' })\r\n          setTimeout(() => {\r\n            setMsg(null)\r\n          }, 3000)\r\n        })\r\n        .catch((error) => {\r\n          setMsg({ message: error.response.data.error, className: 'error' })\r\n          setTimeout(() => {\r\n            setMsg(null)\r\n          }, 5000)\r\n        })\r\n    }\r\n    setNewName('')\r\n    setNewNum('')\r\n  }\r\n  return (\r\n    <div>\r\n      <form>\r\n        <div>\r\n          name:{' '}\r\n          <input\r\n            value={newName}\r\n            onChange={handleNameChange}\r\n            placeholder=\"Enter a name\"\r\n          />\r\n        </div>\r\n        <div>\r\n          number:{' '}\r\n          <input\r\n            value={newNum}\r\n            onChange={handleNumChange}\r\n            placeholder=\"phone number\"\r\n          />\r\n        </div>\r\n        <div>\r\n          <button type=\"submit\" onClick={handleSubmit}>\r\n            add\r\n          </button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default PersonForm\r\n","import React from 'react'\r\n\r\nconst Persons = ({ filterPersons, handleDelete }) => {\r\n  return filterPersons.map((person, i) => (\r\n    <div key={i}>\r\n      {person.name} - {person.number}{' '}\r\n      <button onClick={() => handleDelete(person.id, person.name)}>\r\n        delete\r\n      </button>\r\n    </div>\r\n  ))\r\n}\r\n\r\nexport default Persons\r\n","import React, { useEffect, useState } from 'react'\r\nimport Message from './components/Message'\r\nimport PersonForm from './components/PersonForm'\r\nimport Persons from './components/Persons'\r\nimport { deletePerson, getPersons } from './controllers/persons'\r\n\r\nconst App = () => {\r\n  const [persons, setPersons] = useState([])\r\n  const [msg, setMsg] = useState(null)\r\n  const [filter, setFilter] = useState('')\r\n  const [filterPersons, setFilterPersons] = useState(persons)\r\n\r\n  const handleFilterChange = (e) => {\r\n    setFilter(e.target.value)\r\n    setFilterPersons(\r\n      persons.filter(\r\n        (person) =>\r\n          person.name.toLowerCase().indexOf(e.target.value.toLowerCase()) !== -1\r\n      )\r\n    )\r\n  }\r\n\r\n  const handleDelete = (id, name) => {\r\n    if (window.confirm(`Delete ${name}`)) {\r\n      deletePerson(id)\r\n        .then(() => {\r\n          getPersons().then((data) => setPersons(data))\r\n        })\r\n        .catch((error) => {\r\n          setMsg({ msg: `${name} does not exist`, className: 'error' })\r\n          setTimeout(() => {\r\n            setMsg(null)\r\n          }, 3000)\r\n        })\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    getPersons().then((data) => setPersons(data))\r\n  }, [])\r\n\r\n  return (\r\n    <div>\r\n      <h1>Search for</h1>\r\n      <div>\r\n        filter shown with{' '}\r\n        <input onChange={handleFilterChange} value={filter}></input>\r\n      </div>\r\n      <Message notify={msg} />\r\n      <h2>Phonebook</h2>\r\n      <PersonForm persons={persons} setPersons={setPersons} setMsg={setMsg} />\r\n      <h2>Numbers</h2>\r\n      {filter === '' ? (\r\n        <Persons handleDelete={handleDelete} filterPersons={persons} />\r\n      ) : (\r\n        <Persons handleDelete={handleDelete} filterPersons={filterPersons} />\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default App\r\n","import React from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport App from './App'\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n)\r\n"],"sourceRoot":""}