(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{41:function(e,t,n){"use strict";n.r(t);var r=n(1),c=n.n(r),a=n(16),s=n.n(a),u=n(4),o=n(0),i=function(e){var t=e.notify;if(null===t)return null;var n=t.msg,r=t.className;return Object(o.jsx)("div",{className:r,children:n})},l=n(3),f=n.n(l),d=n(5),j=n(6),b=n.n(j),h="/api/persons",p=function(){var e=Object(d.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.get(h);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),m=function(){var e=Object(d.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.post(h,t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=function(){var e=Object(d.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.delete("".concat(h,"/").concat(t));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=Object(d.a)(f.a.mark((function e(t,n){var r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.put("".concat(h,"/").concat(n),t);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),x=function(e){var t=e.setPersons,n=e.persons,c=e.setMsg,a=Object(r.useState)(""),s=Object(u.a)(a,2),i=s[0],l=s[1],f=Object(r.useState)(""),d=Object(u.a)(f,2),j=d[0],b=d[1];return Object(o.jsx)("div",{children:Object(o.jsxs)("form",{children:[Object(o.jsxs)("div",{children:["name:"," ",Object(o.jsx)("input",{value:i,onChange:function(e){l(e.target.value)},placeholder:"Enter a name"})]}),Object(o.jsxs)("div",{children:["number:"," ",Object(o.jsx)("input",{value:j,onChange:function(e){b(e.target.value)},placeholder:"phone number"})]}),Object(o.jsx)("div",{children:Object(o.jsx)("button",{type:"submit",onClick:function(e){e.preventDefault();var r={name:i,number:j},a=n.find((function(e){return e.name===i}));void 0!==a?window.confirm("".concat(i," is already in your phonebook, do you want replace the old number with a new one?"))&&v(r,a.id).then((function(e){t(n.map((function(t){return e.id===t.id?e:t}))),c({msg:"Updated ".concat(e.name),className:"success"}),setTimeout((function(){c(null)}),3e3)})):m(r).then((function(e){t(n.concat(e)),c({msg:"Added ".concat(e.name),className:"success"}),setTimeout((function(){c(null)}),3e3)})).catch((function(e){c({message:e.response.data.error,className:"error"}),setTimeout((function(){c(null)}),5e3)})),l(""),b("")},children:"add"})})]})})},w=function(e){var t=e.filterPersons,n=e.handleDelete;return t.map((function(e,t){return Object(o.jsxs)("div",{children:[e.name," - ",e.number," ",Object(o.jsx)("button",{onClick:function(){return n(e.id,e.name)},children:"delete"})]},t)}))},g=function(){var e=Object(r.useState)([]),t=Object(u.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(null),s=Object(u.a)(a,2),l=s[0],f=s[1],d=Object(r.useState)(""),j=Object(u.a)(d,2),b=j[0],h=j[1],m=Object(r.useState)(n),v=Object(u.a)(m,2),g=v[0],k=v[1],y=function(e,t){window.confirm("Delete ".concat(t))&&O(e).then((function(){p().then((function(e){return c(e)}))})).catch((function(e){f({msg:"".concat(t," does not exist"),className:"error"}),setTimeout((function(){f(null)}),3e3)}))};return Object(r.useEffect)((function(){p().then((function(e){return c(e)}))}),[]),Object(o.jsxs)("div",{children:[Object(o.jsx)("h1",{children:"Search for"}),Object(o.jsxs)("div",{children:["filter shown with"," ",Object(o.jsx)("input",{onChange:function(e){h(e.target.value),k(n.filter((function(t){return-1!==t.name.toLowerCase().indexOf(e.target.value.toLowerCase())})))},value:b})]}),Object(o.jsx)(i,{notify:l}),Object(o.jsx)("h2",{children:"Phonebook"}),Object(o.jsx)(x,{persons:n,setPersons:c,setMsg:f}),Object(o.jsx)("h2",{children:"Numbers"}),""===b?Object(o.jsx)(w,{handleDelete:y,filterPersons:n}):Object(o.jsx)(w,{handleDelete:y,filterPersons:g})]})};s.a.render(Object(o.jsx)(c.a.StrictMode,{children:Object(o.jsx)(g,{})}),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.b5c7f74e.chunk.js.map