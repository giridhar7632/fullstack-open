(this["webpackJsonpbloglist-frontend"]=this["webpackJsonpbloglist-frontend"]||[]).push([[0],{123:function(e,t,n){},124:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(11),i=n.n(c),s=n(15),o=n(26),u=n(16),l=n(2),d=function(e){var t=e.user;return t?null===t?null:Object(l.jsxs)("div",{children:[Object(l.jsx)("h2",{children:t.name}),Object(l.jsx)("h3",{children:"Your blogs"}),Object(l.jsx)("ul",{children:t.blogs.map((function(e){return Object(l.jsx)("li",{children:e.title},e.id)}))})]}):null},j=n(157),b=n(158),p=n(7),f=n.n(p),h=n(10),O=n(82),m=n(50),x=n(20),g=n.n(x),v="/api/blogs",y=null,w={setToken:function(e){y="bearer ".concat(e)},getAll:function(){return g.a.get(v).then((function(e){return e.data}))},create:function(){var e=Object(h.a)(f.a.mark((function e(t){var n,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:y}},e.next=3,g.a.post(v,t,n);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),update:function(e,t){var n={headers:{Authorization:y}};return g.a.put("".concat(v,"/").concat(e),t,n).then((function(e){return e.data}))},updateLikes:function(){var e=Object(h.a)(f.a.mark((function e(t){var n,r,a,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:y}},e.next=3,g.a.get("".concat(v,"/").concat(t));case 3:return r=e.sent,a=Object(m.a)(Object(m.a)({},r.data),{},{likes:r.data.likes+1}),e.next=7,g.a.put("".concat(v,"/").concat(t),a,n);case 7:return c=e.sent,e.abrupt("return",c.data);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),deleteBlog:function(){var e=Object(h.a)(f.a.mark((function e(t){var n,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:y}},e.next=3,g.a.delete("".concat(v,"/").concat(t),n);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),createComment:function(){var e=Object(h.a)(f.a.mark((function e(t,n){var r,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={headers:{Authorization:y}},e.next=3,g.a.post("".concat(v,"/").concat(t,"/comments"),n,r);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),updateComment:function(){var e=Object(h.a)(f.a.mark((function e(t,n){var r,a,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.get("".concat(v,"/").concat(t));case 2:return r=e.sent,a=Object(m.a)(Object(m.a)({},r.data),{},{comments:r.data.comments.concat(n)}),e.next=6,g.a.put("".concat(v,"/").concat(t),a);case 6:return c=e.sent,e.abrupt("return",c.data);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},k=function(){return function(){var e=Object(h.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.getAll();case 2:n=e.sent,t({type:"INIT_BLOG",data:n.sort((function(e,t){var n=e.likes,r=t.likes;return n<r?1:n>r?-1:0}))});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},C=function(e){return function(){var t=Object(h.a)(f.a.mark((function t(n){var r;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w.create(e);case 2:r=t.sent,n({type:"NEW_BLOG",data:r});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},N=function(e){return function(){var t=Object(h.a)(f.a.mark((function t(n){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w.deleteBlog(e);case 2:n({type:"DELETE_BLOG",data:{id:e}});case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},T=function(e,t){return function(){var n=Object(h.a)(f.a.mark((function n(r){var a;return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,w.createComment(e,{comment:t});case 2:a=n.sent,r({type:"UPDATE_BLOG",data:a});case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"NEW_BLOG":return[].concat(Object(O.a)(e),[t.data]);case"INIT_BLOGS":return t.data;case"UPDATE_BLOG":var n=t.data;return e.map((function(e){return e.id===n.id?n:e}));case"DELETE_BLOG":var r=t.data.id;return e.filter((function(e){return e.id!==r}));default:return e}},S=n(25),B=function(){var e=Object(r.useState)(""),t=Object(S.a)(e,2),n=t[0],a=t[1],c=Object(s.b)(),i=Object(s.c)((function(e){return e.blogs})),o=Object(u.h)("/blogs/:id");if(!(i?i.find((function(e){return e.id===o.params.id})):null))return null;var d=function(){var e=Object(h.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),c(T(o.params.id,n)),c(k()),a("");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(l.jsx)("div",{className:"CreateCommentContainer",children:Object(l.jsxs)("form",{onSubmit:d,children:[Object(l.jsxs)("div",{className:"inputCommentDiv",children:[Object(l.jsx)("label",{htmlFor:"commetn",children:"comment:"}),Object(l.jsx)("input",{type:"text",value:n,id:"comment",name:"comment",onChange:function(e){var t=e.target;return a(t.value)}})]}),Object(l.jsx)("button",{id:"submitBlogButton",type:"submit",children:"Create"})]})})},I=n(153),L=a.a.forwardRef((function(e,t){var n=Object(r.useState)(!1),a=Object(S.a)(n,2),c=a[0],i=a[1],s={display:c?"none":""},o={display:c?"":"none"},u=function(){i(!c)};return Object(r.useImperativeHandle)(t,(function(){return{toggleVisibility:u}})),Object(l.jsxs)("div",{style:{display:"flex",justifyContent:"center"},children:[Object(l.jsx)("div",{style:s,children:Object(l.jsx)(I.a,{variant:"outlined",color:"primary",className:"togglableButton",onClick:u,children:e.buttonLabel})}),Object(l.jsxs)("div",{style:o,children:[Object(l.jsx)(I.a,{variant:"outlined",color:"primary",onClick:u,children:"Cancel"}),e.children]})]})}));L.displayName="Togglable";var A,_=L,D=function(e){var t=e.blog,n=Object(s.b)(),a=Object(r.useRef)();if(!t)return null;return Object(l.jsxs)(j.a,{component:"main",maxWidth:"xs",className:"blogViewContainer",children:[Object(l.jsx)(b.a,{component:"div",variant:"h4",children:t.title}),Object(l.jsxs)("div",{className:"blogViewInfoContainer",children:[Object(l.jsx)("a",{href:t.url,children:t.url}),Object(l.jsxs)("div",{children:[t.likes," likes ",Object(l.jsx)("button",{onClick:function(e){var r;e.preventDefault(),n((r=t.id,function(){var e=Object(h.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.updateLikes(r);case 2:n=e.sent,t({type:"UPDATE_BLOG",data:n});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())),n(k())},children:"like"})]}),Object(l.jsxs)("div",{children:["added by ",t.user.name]})]}),Object(l.jsxs)("div",{className:"blogViewCommentContainer",children:[Object(l.jsx)("h3",{children:"Comments"}),Object(l.jsx)(_,{buttonLabel:"New comment",ref:a,children:Object(l.jsx)(B,{})}),Object(l.jsx)("ul",{children:t.comments.map((function(e,t){return Object(l.jsx)("li",{children:e},t)}))})]})]})},R=n(159),U=n(160),W=n(173),F=Object(R.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center",border:"solid grey",borderRadius:"10px",padding:"5px",backgroundColor:"lightGrey"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}})),G=function(e){var t=e.handleCreateBlog,n=F(),a=Object(r.useState)(""),c=Object(S.a)(a,2),i=c[0],s=c[1],o=Object(r.useState)(""),u=Object(S.a)(o,2),d=u[0],p=u[1],f=Object(r.useState)(""),h=Object(S.a)(f,2),O=h[0],m=h[1];return Object(l.jsxs)(j.a,{component:"main",maxWidth:"xs",children:[Object(l.jsx)(U.a,{}),Object(l.jsxs)("div",{className:n.paper,children:[Object(l.jsx)(b.a,{children:"Create new blog"}),Object(l.jsxs)("form",{className:n.form,onSubmit:function(e){e.preventDefault(),t({title:i,author:d,url:O}),s(""),p(""),m("")},children:[Object(l.jsx)(W.a,{variant:"outlined",label:"Title",autoFocus:!0,fullWidth:!0,margin:"dense",value:i,id:"title",name:"title",onChange:function(e){var t=e.target;return s(t.value)}}),Object(l.jsx)(W.a,{variant:"outlined",label:"Author",autoFocus:!0,fullWidth:!0,margin:"dense",value:d,id:"author",name:"author",onChange:function(e){var t=e.target;return p(t.value)}}),Object(l.jsx)(W.a,{variant:"outlined",label:"URL",autoFocus:!0,fullWidth:!0,margin:"dense",value:O,id:"url",name:"url",onChange:function(e){var t=e.target;return m(t.value)}}),Object(l.jsx)(I.a,{className:n.submit,fullWidth:!0,variant:"contained",color:"primary",id:"createButton",type:"submit",children:"Create"})]})]})]})},V=n(161),z=n(162),J=n(163),M=n(164),P=Object(R.a)({card:{display:"flex",margin:"5px 5px 10px 5px",background:"lightGrey",textAlign:"center",width:"100%"},cardDetails:{flex:1},cardMedia:{width:160}}),q=function(e){var t=e.blog,n=P();return Object(l.jsx)(V.a,{item:!0,lg:12,md:6,children:Object(l.jsx)(z.a,{component:"a",href:"/blogs/".concat(t.id),children:Object(l.jsx)(J.a,{className:n.card,children:Object(l.jsx)("div",{className:n.cardDetails,children:Object(l.jsxs)(M.a,{children:[Object(l.jsxs)(b.a,{children:["Title: ",t.title]}),Object(l.jsxs)(b.a,{children:["Author: ",t.author]})]})})})})})},H=function(e,t,n){return A&&(clearTimeout(A),A=null),function(r){r({type:"SET_NOTIFICATION",notification:{message:e,color:t}}),A=setTimeout((function(){return r(Y())}),1e3*n)}},Y=function(){return{type:"CLEAR_NOTIFICATION"}},K=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_NOTIFICATION":return t.notification;case"CLEAR_NOTIFICATION":return null;default:return e}},Q=function(){return function(){var e=Object(h.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.get("/api/users").then((function(e){return e.data}));case 2:n=e.sent,t({type:"SET_USERS",data:n});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},X=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USERS":return t.data;default:return e}},Z=function(e){var t=e.user,n=e.blogs,a=Object(r.useRef)(),c=Object(s.b)(),i=function(){var e=Object(h.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.current.toggleVisibility();try{c(C(t)),c(H("A new blog: ".concat(t.title," by ").concat(t.author),"green",5))}catch(n){console.log(n),c(H("Could not create new blog","red",5))}c(k()),c(Q());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),o=function(){var e=Object(h.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c(N(t)),c(k()),c(Q());case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(l.jsxs)(j.a,{children:[Object(l.jsx)(_,{buttonLabel:"New blog",ref:a,children:Object(l.jsx)(G,{handleCreateBlog:i})}),Object(l.jsx)("br",{}),Object(l.jsx)("div",{className:"blogsListContainer",children:n.map((function(e){return Object(l.jsx)(q,{blog:e,deleteBlog:o,user:t},e.id)}))})]})},$={login:function(){var e=Object(h.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.post("/api/login",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},ee=n(174),te=function(){var e=Object(s.c)((function(e){return e.notification}));return null===e.message||""===e.message||""===e?null:"green"===e.color&&e.message?Object(l.jsx)(ee.a,{severity:"success",children:e.message}):"red"===e.color&&e.message?Object(l.jsx)(ee.a,{severity:"error",children:e.message}):Object(l.jsx)(ee.a,{severity:"info",children:e.message})},ne=function(e){return function(){var t=Object(h.a)(f.a.mark((function t(n){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:w.setToken(e.token),n({type:"SET_USER",data:e});case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},re=function(){return function(){var e=Object(h.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:window.localStorage.removeItem("loggedUser"),t({type:"REMOVE_USER"});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},ae=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER":return t.data;case"REMOVE_USER":return null;default:return e}},ce=n(175),ie=n(79),se=n.n(ie),oe=Object(R.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}})),ue=function(){var e=oe(),t=Object(s.b)(),n=Object(u.g)(),a=Object(r.useState)(""),c=Object(S.a)(a,2),i=c[0],o=c[1],d=Object(r.useState)(""),p=Object(S.a)(d,2),O=p[0],m=p[1],x=function(){var e=Object(h.a)(f.a.mark((function e(r){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),e.prev=1,e.next=4,$.login({username:i,password:O});case 4:a=e.sent,window.localStorage.setItem("loggedUser",JSON.stringify(a)),t(ne(a)),o(""),m(""),n.push("/"),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),t(H("Wrong username or password","red",5));case 15:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}();return Object(l.jsxs)(j.a,{component:"main",maxWidth:"xs",children:[Object(l.jsx)(U.a,{}),Object(l.jsxs)("div",{className:e.paper,children:[Object(l.jsx)(ce.a,{className:e.avatar,children:Object(l.jsx)(se.a,{})}),Object(l.jsx)(b.a,{component:"h1",variant:"h5",children:"Log in to Blog application"}),Object(l.jsx)(te,{}),Object(l.jsx)("div",{className:"loginFormContainer",children:Object(l.jsxs)("form",{className:e.form,onSubmit:x,noValidate:!0,children:[Object(l.jsx)(W.a,{variant:"outlined",label:"Username",required:!0,fullWidth:!0,autoFocus:!0,margin:"normal",value:i,id:"username",name:"username",onChange:function(e){var t=e.target;return o(t.value)}}),Object(l.jsx)(W.a,{variant:"outlined",label:"Password",required:!0,fullWidth:!0,autoFocus:!0,margin:"normal",value:O,id:"password",name:"password",type:"password",onChange:function(e){var t=e.target;return m(t.value)}}),Object(l.jsx)(I.a,{className:e.submit,fullWidth:!0,variant:"contained",color:"primary",id:"loginButton",type:"submit",children:"login"})]})})]})]})},le=n(165),de=n(84),je=n(166),be=n(167),pe=n(168),fe=n(169),he=n(170),Oe=Object(R.a)({table:{background:"#e7e9eb",minWidth:650},cell:{color:"black","&:hover":{background:"#adaeaf"}}}),me=function(){var e=Object(s.c)((function(e){return e.users})),t=Object(s.b)(),n=Oe(),a=Object(u.g)();return Object(r.useEffect)((function(){t(Q())}),[]),Object(l.jsx)("div",{children:Object(l.jsx)(le.a,{component:de.a,children:Object(l.jsxs)(je.a,{className:n.table,size:"small",children:[Object(l.jsx)(be.a,{children:Object(l.jsxs)(pe.a,{children:[Object(l.jsx)(fe.a,{children:"Users"}),Object(l.jsx)(fe.a,{children:"Blogs created"})]})}),Object(l.jsx)(he.a,{children:e.map((function(e){return Object(l.jsxs)(pe.a,{className:n.cell,onClick:function(){return a.push("/users/".concat(e.id))},children:[Object(l.jsx)(fe.a,{component:"th",scope:"row",children:Object(l.jsx)(o.b,{to:"/users/".concat(e.id),children:e.name})}),Object(l.jsx)(fe.a,{children:e.blogs.length})]},e.id)}))})]})})})},xe=n(171),ge=n(172),ve=function(e){var t=e.user,n=Object(s.b)(),r=Object(u.g)();return t&&null!==t?Object(l.jsx)(xe.a,{position:"static",children:Object(l.jsxs)(ge.a,{children:[Object(l.jsx)(I.a,{color:"inherit",component:o.b,to:"/",children:"Blogs"}),Object(l.jsx)(I.a,{color:"inherit",component:o.b,to:"/users",children:"Users"}),Object(l.jsxs)(b.a,{children:[t.name," logged in"," ",Object(l.jsx)(I.a,{color:"inherit",onClick:function(e){e.preventDefault(),n(re()),r.push("/")},children:"logout"})]})]})}):null},ye=function(){var e=Object(s.b)(),t=Object(u.g)(),n=Object(s.c)((function(e){return e.user})),a=function(e){var t=e.blogs;return t},c=Object(s.c)((function(e){return e.users}));Object(r.useEffect)((function(){e(k()),e(Q())}),[]),Object(r.useEffect)((function(){var t=window.localStorage.getItem("loggedBlogListUser");if(t){var n=JSON.parse(t);e(ne(n)),w.setToken(n.token)}else e(re())}),[]);var i=Object(u.h)("/users/:id"),o=i?c.find((function(e){return e.id===i.params.id})):null,b=Object(u.h)("/blogs/:id"),p=b?a.find((function(e){return e.id===b.params.id})):null;return Object(l.jsxs)("div",{children:[null===n?null:Object(l.jsx)(ve,{user:n}),Object(l.jsxs)(j.a,{children:[Object(l.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:Object(l.jsx)(te,{})}),Object(l.jsxs)(u.d,{children:[Object(l.jsx)(u.b,{path:"/login",children:null===n?Object(l.jsx)(ue,{}):Object(l.jsx)(u.a,{to:"/blogs"})}),Object(l.jsxs)(u.b,{path:"/users/:id",children:[Object(l.jsx)(d,{user:o}),Object(l.jsx)("button",{onClick:function(){return t.push("/users")},children:" Back "})]}),Object(l.jsx)(u.b,{path:"/users",exact:!0,children:Object(l.jsx)(me,{})}),Object(l.jsx)(u.b,{path:"/blogs/:id",children:Object(l.jsx)(D,{blog:p})}),Object(l.jsx)(u.b,{path:"/blogs",exact:!0,children:n?Object(l.jsx)("div",{children:Object(l.jsx)(Z,{user:n,blogs:a})}):null}),Object(l.jsx)(u.b,{path:"/",exact:!0,children:null===n?Object(l.jsx)(u.a,{to:"/login"}):Object(l.jsx)(u.a,{to:"/blogs"})})]})]})]})},we=n(49),ke=n(80),Ce=n(81),Ne=Object(we.combineReducers)({notification:K,blogs:E,user:ae,users:X}),Te=Object(we.createStore)(Ne,Object(Ce.composeWithDevTools)(Object(we.applyMiddleware)(ke.a)));n(123);i.a.render(Object(l.jsx)(o.a,{children:Object(l.jsx)(s.a,{store:Te,children:Object(l.jsx)(ye,{})})}),document.getElementById("root"))}},[[124,1,2]]]);
//# sourceMappingURL=main.7158e8bb.chunk.js.map